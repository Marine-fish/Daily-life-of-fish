<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        /**
         * 监听所有属性的值的操作
         * 当值发生了变化,立马做出响应
        */

        const obj = {
            name: "per",
            age: 23,
            from: "China"
        }

        /**
         * 如果只是监听obj里一个属性的操作
         * 这个就是Vue2的响应式原理
         * 缺点: 只能监听获取和设置的方法,如果想要
         * 进行增和删除利用defineProperty就无法做到了
    //     */
    //    let _name = obj.name
    //    Object.defineProperty(obj, "name", {
    //     set(newValue) {
    //         console.log("监听到obj对象的name属性", newValue)
    //         _name = newValue
    //     },
    //     get() {
    //         console.log("已获取obj对象的name属性进行操作")
    //         return _name
    //     }
    //    })
    //    console.log(obj.name)
    //    obj.name = "Mike"

        /**
         * 如果监听obj里全部属性的操作
        */
        const keys = Object.keys(obj)
        for (const key of keys) {
            let value = obj[key]
            Object.defineProperty(obj, key, {
                set(newValue) {
                    console.log(`监听${key}所有属性`, newValue)
                    value = newValue
                },
                get() {
                    console.log("获取到所有属性")
                    return value
                }
            })
        }

        console.log(obj.name, obj.age )
        obj.name = "哈哈哈"
        obj.age = 29
    </script>
</body>
</html>